function _addReoTagHide(e){var t=document.createElement("style");t.type="text/css",newStyle=e+" { display: none;}",t.appendChild(document.createTextNode(newStyle)),document.getElementsByTagName("head")[0].appendChild(t)}function reoManualTrigger(e,t){void 0===t&&(t=null),_tryTriggering(e,t)}function reoManualLoad(e){_reoManualLoad(e instanceof jQuery?e:$(e))}function reoLoadContent(e,t){var r=_getElementToLoad(e);if("true"==$(e).attr("data-reo-get-anim")){var a=$(t).hide();0==r.children().length?(r.append(a),a.fadeIn()):r.children().fadeOut(function(){r.empty(),r.append(a),a.fadeIn()})}else r.empty(),r.append(t)}function reoAppendContent(e,t){var r=_getElementToLoad(e);if("true"==$(e).attr("data-reo-get-anim")){var a=$(t).hide();r.append(a),a.fadeIn()}else r.append(t)}function reoPrependContent(e,t){var r=_getElementToLoad(e);if("true"==$(e).attr("data-reo-get-anim")){var a=$(t).hide();r.prepend(a),a.fadeIn()}else r.prepend(t)}function reoLoaderShow(e){var t=0;$(e).is("[data-reo-loader-use-count]")&&(t=parseInt($(e).attr("data-reo-loader-use-count"))),0==t&&$(e).css("visibility","visible"),$(e).attr("data-reo-loader-use-count",t+1)}function reoLoaderHide(e){var t;$(e).is("[data-reo-loader-use-count]")&&0!=(t=parseInt($(e).attr("data-reo-loader-use-count")))&&(1==t&&$(e).css("visibility","hidden"),$(e).attr("data-reo-loader-use-count",t-1))}function _customLoadFunc(e,t,r){if(void 0===r&&(r=null),null!=t){if(e.is("[data-reo-trigger-load-func]"))window[e.attr("data-reo-trigger-load-func")](e[0],r,t);else{if(!e.is("[data-reo-content-load-func]"))return!1;window[e.attr("data-reo-content-load-func")](e[0],r)}return!0}return!!e.is("[data-reo-content-load-func]")&&(window[e.attr("data-reo-content-load-func")](e[0],r),!0)}function _addTriggerSourceElem(e,t){null==t.tr?t.tr=[e[0]]:t.tr.push(e[0])}function _reoTrigger(selector,triggerSource,triggerSourceElems){var count=0;if("string"==typeof triggerSource)$(selector.format(triggerSource)).each(function(){$(this).trigger("reo-trigger",[triggerSourceElems]),count++});else{if(triggerSource.is("[data-reo-trigger-func]")){var fn=window[triggerSource.attr("data-reo-trigger-func")];return _addTriggerSourceElem(triggerSource,tr={tr:triggerSourceElems}),"function"==typeof fn?fn(tr.tr):eval(triggerSource.attr("data-reo-trigger-func")),1}$(selector.format(triggerSource.attr("data-reo-trigger"))).each(function(){0==count&&_addTriggerSourceElem(triggerSource,tr={tr:triggerSourceElems}),$(this).trigger("reo-trigger",[tr.tr]),count++})}return count}function _tryTriggering(e,t){0==_reoTrigger('[data-reo-trigger-listen="{0}"]',e,t)&&0==_reoTrigger("{0}",e,t)&&0==_reoTrigger("#{0}",e,t)&&_reoTrigger("[data-reo-name~={0}]",e,t)}function _urlData(e,t){return e.is("[data-reo-url-data-func]")?window[e.attr("data-reo-url-data-func")](e[0],t):e.is("[data-reo-form-data]")?$("#"+$(e).attr("data-reo-form-data")).serializeArray():e.is("[data-reo-form]")?$("#"+$(e).attr("data-reo-form")).serializeArray():null}function _doGetRequest(e,t){return null==t?$.get(e):$.get(e,t)}function _getRequest(e,t){var r;if(_loaderShow(e),e.is("[data-reo-get-url-func]")){a=_urlData(e,t);r=_doGetRequest(window[e.attr("data-reo-get-url-func")](e[0],t),a)}else if(e.is("[data-reo-get-url]")){a=_urlData(e,t);r=_doGetRequest(e.attr("data-reo-get-url"),a)}else{if(e.is("[data-reo-submit]"))return void $("#"+e.attr("data-reo-submit")).submit();if(e.is("[data-reo-post-url-func]")){a=_urlData(e,t);r=$.post(window[e.attr("data-reo-post-url-func")](e[0],t),a)}else if(e.is("[data-reo-post-url]")){a=_urlData(e,t);r=$.post($(e).attr("data-reo-post-url"),a)}else{if(!e.is("[data-reo-form]"))return void console.log("Nothing to do");var a=_urlData(e,t),o=$("#"+e.attr("data-reo-form")).attr("action");r=$.post(o,a)}}return r}function _urlLoadFunc(e,t){var r;void 0!=(r=_getRequest(e,t))&&(e.is("[data-reo-trigger]")&&e.is("[data-reo-trigger-always]")&&_tryTriggering(e),r.done(function(r,a,o){if(null==o.getResponseHeader("Reo-Redirect")){var n={response:r};if(204!=o.status&&!_customLoadFunc(e,t,r)){_preLoadFunc(e,n);var d=$(n.response),i=d.first();if("DATA-REO-OVERRIDE"==i.prop("tagName")){var l=JSON.parse(i.html());void 0!=l.loadTo?reoLoadContent(l.loadTo,d.slice(1)):void 0!=l.appendTo?reoAppendContent(l.appendTo,d.slice(1)):void 0!=l.prependTo&&reoPrependContent(l.prependTo,d.slice(1))}else if(e.is("[data-reo-load-to]")?reoLoadContent(e,d):e.is("[data-reo-append-to]")?reoAppendContent(e,d):e.is("[data-reo-prepend-to]")?reoPrependContent(e,d):reoLoadContent(e,d),e.is("[data-reo-page-title]")&&(document.title=e.attr("data-reo-page-title")),e.is("[data-reo-page-url]")){var u;u=e.is("[data-reo-page-back-func]")?{action:"self",content:d,func:e.attr("data-reo-page-back-func"),triggeredElem:e}:{action:"auto",content:d},_stateStack.push(u),history.pushState(e.attr("data-reo-page-title"),"nothing",e.attr("data-reo-page-url"))}}"stop"!=o.getResponseHeader("Reo-Post-Load")&&(_postFunc(e,n.response,t),_loaderHide(e),_deleteElem(e),!e.is("[data-reo-trigger]")&&!e.is("[data-reo-trigger-func]")||e.is("[data-reo-trigger-always]")||_tryTriggering(e,t))}else location.href=o.getResponseHeader("Reo-Redirect")}),r.fail(function(t){_loaderHide(e),_reoErrorFunc(e,t)}))}function _reoManualLoad(e,t){void 0===t&&(t=null),_preFuncCheck(e,t)&&(_getElementToLoad(e),e.is("[data-reo-get-url]")||e.is("[data-reo-post-url]")||e.is("[data-reo-delete]")||e.is("[data-reo-custom-delete-func]")||e.is("[data-reo-get-url-func]")||e.is("[data-reo-post-url-func]")||e.is("[data-reo-submit]")||e.is("[data-reo-form]")?e.is("[data-reo-get-url]")||e.is("[data-reo-post-url]")||e.is("[data-reo-get-url-func]")||e.is("[data-reo-post-url-func]")||e.is("[data-reo-submit]")||e.is("[data-reo-form]")?_urlLoadFunc(e,t):(e.is("[data-reo-delete]")||e.is("[data-reo-custom-delete-func]"))&&_deleteElem(e):_customLoadFunc(e,t)||console.log("Nothing to do"))}function _getElementToLoadByStr(e){return 0!=$(e).length?$(e):0!=$("#"+e).length?$("#"+e):$('[data-reo-name~="{0}"]'.format(e))}function _getElementToLoad(e){if(e instanceof jQuery)return e.is("[data-reo-load-to]")?_getElementToLoadByStr(e.attr("data-reo-load-to")):e.is("[data-reo-append-to]")?_getElementToLoadByStr(e.attr("data-reo-append-to")):e.is("[data-reo-prepend-to]")?_getElementToLoadByStr(e.attr("data-reo-prepend-to")):e;if("string"==typeof e)return _getElementToLoadByStr(e);throw"Invalid element"}function _preFuncCheck(e,t){if(e.is("[data-reo-pre-func]")){var r=(0,window[e.attr("data-reo-pre-func")])(e[0],t);return void 0===r||r}return!0}function _preLoadFunc(element,retData){if(element.is("[data-reo-pre-load-func]")){var func=window[element.attr("data-reo-pre-load-func")];null!=func?func(element[0],retData):eval(element.attr("data-reo-pre-load-func"))}}function _postFunc(element,retData,triggerSourceElems){if(element.is("[data-reo-post-func]")){var func=window[element.attr("data-reo-post-func")];null!=func?func(element[0],retData,triggerSourceElems):eval(element.attr("data-reo-post-func"))}}function _getLoaderElem(e){e.attr("data-reo-loader-elem");try{return $("#"+e.attr("data-reo-loader-elem"))}catch(t){return $(e.attr("data-reo-loader-elem"))}}function _loaderShow(triggeredElem){if(triggeredElem.is("[data-reo-loader-show-func]")){var fn=window[triggeredElem.attr("data-reo-loader-show-func")],jsStr=window[triggeredElem.attr("data-reo-loader-show-func")];fn&&(jsStr=triggeredElem.attr("data-reo-loader-show-func")+"(triggeredElem[0])"),eval(jsStr)}else if(triggeredElem.is("[data-reo-loader-elem]")){var elem=_getLoaderElem(triggeredElem);reoLoaderShow(elem)}}function _loaderHide(triggeredElem){if(triggeredElem.is("[data-reo-loader-hide-func]")){var fn=window[triggeredElem.attr("data-reo-loader-hide-func")],jsStr=window[triggeredElem.attr("data-reo-loader-hide-func")];fn&&(jsStr=triggeredElem.attr("data-reo-loader-hide-func")+"(triggeredElem[0])"),eval(jsStr)}else if(triggeredElem.is("[data-reo-loader-elem]")){var elem=_getLoaderElem(triggeredElem);reoLoaderHide(elem)}}function _reoErrorFunc(e,t){if(e.is("[data-reo-error-func]")){var r=window[e.attr("data-reo-error-func")];r?r(e[0],t):alert("An error has occurred")}else console.log("An error has occurred: "+t)}function _deleteElem(e){if(e.is("[data-reo-custom-delete-func]"))window[e.attr("data-reo-custom-delete-func")](e[0]);else if(e.is("[data-reo-delete]")){var t=_getElementToLoadByStr(e.attr("data-reo-delete"));"true"==e.attr("data-reo-delete-anim")?t.fadeOut(function(){$(this).remove()}):t.remove()}}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})});var _stateStack=[];_addReoTagHide("data-reo-override"),$(document).ready(function(){history.pushState(document.title,null,window.location.pathname),$(document.body).on("click",'[data-reo-event="click"]',function(e){"A"!=$(e.target).prop("tagName")||$(e.target).is("[data-reo-prevent-default]")&&"false"!=$(e.target).attr("data-reo-prevent-default")?"true"==$(e.target).attr("data-reo-prevent-default")&&e.preventDefault():e.preventDefault(),_reoManualLoad($(this))}),$(document.body).on("keypress",'[data-reo-event="enter"]',function(e){13==e.keyCode&&_reoManualLoad($(this))}),$('[data-reo-event="scroll"]').bind("scroll",function(){_reoManualLoad($(this))}),$(document.body).on("reo-trigger",function(e,t){_reoManualLoad($(e.target),t)})}),window.addEventListener("popstate",function(event){if(0!=_stateStack.length){var lastState=_stateStack.pop();if(document.title=event.state,"auto"==lastState.action)lastState.content.remove();else if("self"==lastState.action){var fn=window[lastState.func],jsStr=lastState.func;fn&&(jsStr=lastState.func+"(lastState.triggeredElem[0], lastState.content[0])"),eval(jsStr)}}},!1);
